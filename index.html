<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<meta name="app-version" content="1.0.1">
<title>Study Way 2</title>

<!-- ===== PWA ===== -->
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#0b1f33">

<style>
:root{
  --bg:#0b1f33;
  --card:#ffffff;
  --main:#0a58ca;
  --text:#ffffff;
}
body{
  margin:0;
  font-family:Arial;
  background:var(--bg);
  color:var(--text);
}
.header{
  background:var(--main);
  padding:15px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  font-weight:bold;
}
.clock{
  text-align:center;
  font-size:28px;
  font-weight:bold;
  margin:15px 0;
}
.subclock{font-size:14px;opacity:.8;}
.container{
  padding:15px;
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:15px;
}
.card{
  background:var(--card);
  color:#000;
  border-radius:16px;
  padding:30px 10px;
  text-align:center;
  cursor:pointer;
  font-size:18px;
}
.page{display:none;padding:15px}
textarea,input,button{
  width:100%;
  padding:10px;
  margin-top:10px;
  border-radius:8px;
}
button{background:var(--main);color:white;border:none;}
.item{
  background:#fff;color:#000;padding:10px;margin-top:10px;
  border-radius:10px;position:relative;
}
.delete{
  position:absolute;top:5px;left:5px;
  background:red;color:white;border:none;border-radius:6px;
}
.battle{
  background:linear-gradient(135deg,#ff5722,#ff9800);
  padding:20px;border-radius:18px;text-align:center;margin:15px;
}
.countdown{font-size:22px;margin-top:10px;}
.footer{text-align:center;padding:15px;font-size:14px;opacity:.8;}
.footer a{color:#4fc3f7;text-decoration:none;font-weight:bold;}
</style>
</head>

<body>

<div class="header">
  <span onclick="home()">â¬…ï¸</span>
  <span>ğŸ“˜ Study Way 2 v1.0.1</span>
  <span onclick="settings()">âš™ï¸</span>
</div>

<div class="clock" id="clock">00:00:00
  <div class="subclock" id="date"></div>
</div>

<div id="home" class="container">
  <div class="card" onclick="openProgram()">ğŸ’» Ø§Ù„ØªØ®Ø·ÙŠØ·</div>
  <div class="card" onclick="openApp()">ğŸ“± Ø§Ù„ØªÙ†ÙÙŠØ°</div>
</div>

<div class="battle">
  âš”ï¸ Ù…Ø¹Ø±ÙƒØ© Ø§Ù„ÙØµÙ„
  <div class="countdown" id="countdown"></div>
</div>

<div id="program" class="page">
  <h3>ğŸ§  Ø§Ù„Ø®Ø·Ø·</h3>
  <input id="planText" placeholder="Ø§Ø³Ù… Ø§Ù„Ø®Ø·Ø©">
  <input type="time" id="planTime">
  <button onclick="addPlan()">Ø¥Ø¶Ø§ÙØ©</button>
  <div id="plans"></div>
</div>

<div id="app" class="page">
  <h3>âœ… Ù…Ø§ ØªÙ… Ø¥Ù†Ø¬Ø§Ø²Ù‡</h3>
  <textarea id="doneText"></textarea>
  <button onclick="addDone()">Ø­ÙØ¸</button>
  <div id="doneList"></div>
</div>

<div id="settings" class="page">
  <h3>ğŸ¨ Ø§Ù„Ø³Ù…Ø§Øª</h3>
  <button onclick="theme('#2b0b0b','#ff5722')">ğŸ”¥ Ù†Ø§Ø±ÙŠ</button>
  <button onclick="theme('#0b1f33','#1e88e5')">â„ï¸ Ø«Ù„Ø¬ÙŠ</button>
  <button onclick="theme('#1c1c1c','#d4af37')">ğŸŸ¨ Ø°Ù‡Ø¨ÙŠ</button>
</div>

<div class="footer">
  ğŸŒ <a href="https://8-cmyk.github.io" target="_blank">Ù…ÙˆÙ‚Ø¹Ù†Ø§ Ø§Ù„Ø±Ø³Ù…ÙŠ</a>
</div>

<script>
/* ===== Service Worker ===== */
if ("serviceWorker" in navigator) {
  navigator.serviceWorker.register("sw.js");
}

/* ===== Install App (Ù…Ù‡Ù…) ===== */
let deferredPrompt;
window.addEventListener("beforeinstallprompt", (e) => {
  e.preventDefault();
  deferredPrompt = e;

  const btn = document.createElement("button");
  btn.textContent = "ğŸ“² ØªØ«Ø¨ÙŠØª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚";
  btn.style.position = "fixed";
  btn.style.bottom = "20px";
  btn.style.right = "20px";
  btn.style.zIndex = "999";
  btn.style.padding = "12px";
  btn.style.borderRadius = "12px";
  btn.style.background = "#4fc3f7";
  btn.style.border = "none";

  btn.onclick = async () => {
    deferredPrompt.prompt();
    deferredPrompt = null;
    btn.remove();
  };
  document.body.appendChild(btn);
});

/* ===== Ø§Ù„ØªÙ†Ù‚Ù„ ===== */
const pages=["home","program","app","settings"];
function show(id){
  pages.forEach(p=>document.getElementById(p).style.display="none");
  document.getElementById(id).style.display=id==="home"?"grid":"block";
}
function home(){show("home")}
function openProgram(){show("program")}
function openApp(){show("app")}
function settings(){show("settings")}

/* ===== Ø§Ù„Ø³Ø§Ø¹Ø© ===== */
function updateClock(){
  const n=new Date();
  clock.textContent=n.toLocaleTimeString();
  date.textContent=n.toLocaleDateString("ar-DZ");
}
setInterval(updateClock,1000);updateClock();

/* ===== Ø§Ù„Ø¹Ø¯ Ø§Ù„ØªÙ†Ø§Ø²Ù„ÙŠ ===== */
function updateCountdown(){
  const now=new Date();
  let target=new Date(now.getFullYear(),0,7);
  if(now>target) target=new Date(now.getFullYear()+1,0,7);
  const diff=target-now;
  countdown.textContent=Math.floor(diff/86400000)+" ÙŠÙˆÙ…";
}
setInterval(updateCountdown,1000);updateCountdown();

/* ===== Ø§Ù„Ø®Ø·Ø· ===== */
function addPlan(){
  if(!planText.value||!planTime.value)return;
  plans.innerHTML+=`<div class="item">
    <button class="delete" onclick="this.parentElement.remove()">X</button>
    ${planText.value} â° ${planTime.value}
  </div>`;
  planText.value="";planTime.value="";
}
function addDone(){
  if(!doneText.value)return;
  doneList.innerHTML+=`<div class="item">
    <button class="delete" onclick="this.parentElement.remove()">X</button>
    ${doneText.value}
  </div>`;
  doneText.value="";
}
function theme(bg,main){
  document.documentElement.style.setProperty("--bg",bg);
  document.documentElement.style.setProperty("--main",main);
}
</script>

</body>
  </html>
